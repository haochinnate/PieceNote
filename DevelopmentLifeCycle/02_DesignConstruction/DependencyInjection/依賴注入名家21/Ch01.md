# Chapter 01: 依賴注入的基礎: 定義、理由與實作方法

- 定義: 依賴注入(Dependency Injection, 又稱相依性注入)是一套軟體設計的理論與模式，主要是為了開發出具備loosely coupled(鬆耦合)特性的程式碼。

> 身為協作類別應該要依賴於基礎設施(Collaborating class should rely on infrastructure)

## 1.1 編寫易於維護的程式碼

- 需要DI的基本**動機**: 可維護性
  - -> 想要讓軟體的運作能夠更有效率
  - -> 如何編寫出易於維護的程式碼
  - -> 提升可維護性 
  - -> 鬆耦合 loose coupling: 要針對介面編寫程式, 而不是實作

- loose coupling 的設計架構能夠使程式碼具備可擴展性, 而可擴展性就能提升可維護性, DI 其實就是一種達成鬆耦合的技巧

- 需要思考的問題: **物件要從哪裡來?**

- 比喻: 插座就是介面, 插頭以及連接的電器則是實體類別

### Liskov Substitution Principle

- 在不需要對介面(插座)作更動的情況下，便可以切換各種連接插頭的電器(也就是實作)

- 對介面的實作應該要是能替換的, 而且不需要破壞客戶端的介面與實作

- 即使我們無法預知未來會有什麼需求, 但可以確定的是, 這個介面在將來依然適用

### 用比喻來說明四種設計模式

#### Decorator 裝飾者模式

- 用另一個實作來攔截同樣介面的實作

- 讓你在不更動, 不重寫既有的程式碼的情況下, 逐次增加新的功能. 或是在程式流程以 "橫切" 的方式加入其他邏輯.(Cross-Cutting Concerns)

- 在電腦與插座之間加上一台 UPS

#### Composite 合成模式

- 用一個共通的介面(插座), 將既有的實作重構, 然後再依此加入新的實作

- 透過延長線, 將多個電器連接到插座上

#### Adapter 轉接器模式

- 利用一個能與兩種不同介面相合的轉接中介, 把兩個無法直接吻合的介面連接起來

- 通常用在你想要將既有的第三方 API 轉換為應用程式需要介面的時候

#### Null Object 空值物件模式

- 根據介面建立一個什麼都不做的實體類別

- 防止兒童觸電的插座保護蓋

## 1.2 初步的範例: Hello DI!

## 1.3 適合與不適合注入的對象